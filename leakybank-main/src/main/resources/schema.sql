CREATE TABLE USERS (
	LOGIN		VARCHAR(20)		PRIMARY KEY,
	PASSWORD	VARCHAR(20)		NOT NULL,
	FIRST_NAME	VARCHAR(20)		NOT NULL,
	LAST_NAME	VARCHAR(20)		NOT NULL,
	IS_ADMIN	BOOLEAN 		DEFAULT FALSE NOT NULL
);

CREATE TABLE INTERNAL_ACCOUNT_TYPES (
	ID			INTEGER			PRIMARY KEY,
	LABEL		VARCHAR(20)		NOT NULL
);

CREATE TABLE INTERNAL_ACCOUNTS (
	ACCOUNT_NUMBER		INTEGER			PRIMARY KEY,
	OWNER				VARCHAR(20)		NOT NULL,
	ACCOUNT_TYPE		INTEGER			NOT NULL,
	AVAILABLE_BALANCE	DECIMAL(10,2) 	NOT NULL,
	
	CONSTRAINT OWNER_FK FOREIGN KEY (OWNER) REFERENCES USERS(LOGIN) ON DELETE CASCADE,
	CONSTRAINT ACCOUNT_TYPE_FK FOREIGN KEY (ACCOUNT_TYPE) REFERENCES INTERNAL_ACCOUNT_TYPES(ID) ON DELETE CASCADE
);

CREATE TABLE INTERNAL_ACCOUNT_TRANSACTIONS (
	ID					INTEGER					GENERATED BY DEFAULT AS IDENTITY,
	ACCOUNT_NUMBER		INTEGER					NOT NULL,
	AMOUNT				DECIMAL(10,2)			NOT NULL,
	DESCRIPTION			LONGVARCHAR(500)		NOT NULL,
	OPERATION_DATE		DATE					NOT NULL,
	
	CONSTRAINT ACCOUNT_NUMBER_FK FOREIGN KEY (ACCOUNT_NUMBER) REFERENCES INTERNAL_ACCOUNTS(ACCOUNT_NUMBER) ON DELETE CASCADE
);